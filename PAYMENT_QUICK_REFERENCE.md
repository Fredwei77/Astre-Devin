# 支付系统快速参考

## 🚀 快速启动

```bash
# 方式1：仅测试（推荐）
双击 test-payment.bat，选择选项 1

# 方式2：完整测试（需要后端）
双击 test-payment.bat，选择选项 3
```

## 📄 重要页面

| 页面 | 用途 | URL |
|------|------|-----|
| 支付测试 | 完整的支付功能测试 | `test-premium-payment.html` |
| 状态检查 | 检查系统组件状态 | `payment-status-checker.html` |
| 使用指南 | 详细的使用说明 | `PAYMENT_SYSTEM_GUIDE.md` |

## 🎯 测试卡号（Stripe 测试模式）

| 卡号 | 用途 | 结果 |
|------|------|------|
| 4242 4242 4242 4242 | 成功支付 | ✅ 支付成功 |
| 4000 0000 0000 0002 | 卡片被拒 | ❌ 支付失败 |
| 4000 0000 0000 9995 | 余额不足 | ❌ 余额不足 |

**其他信息**：
- 到期日期：任意未来日期（如 12/34）
- CVC：任意3位数字（如 123）
- 邮编：任意5位数字（如 12345）

## 💰 价格表

### 订阅计划

| 计划 | 价格 | 功能 |
|------|------|------|
| Free | $0 | 每日3次，仅模拟数据 |
| Premium | $19.99/月 | 无限AI分析，专家咨询2次/月 |
| Professional | $49.99/月 | 所有功能 + API + 定制报告 |

### 按次付费

| 服务 | 价格 |
|------|------|
| AI占卜 | $0.99 |
| 风水分析 | $1.99 |
| 易经智慧 | $2.99 |

## 🔧 常用命令

### 启动服务器
```bash
npm start
# 或
node server.js
```

### 检查端口
```bash
netstat -ano | findstr :3000
```

### 停止服务器
```
Ctrl + C
```

## 📊 测试模式 vs 生产模式

| 特性 | 测试模式 | 生产模式 |
|------|----------|----------|
| 需要后端 | ❌ 否 | ✅ 是 |
| 真实支付 | ❌ 否 | ✅ 是 |
| Stripe API | ❌ 模拟 | ✅ 真实 |
| 数据持久化 | 本地存储 | 数据库 |
| 自动启用 | localhost | 需配置 |

## 🎨 状态指示器

| 图标 | 含义 |
|------|------|
| ✅ 绿色 | 正常/成功 |
| ⚠️ 黄色 | 警告/测试模式 |
| ❌ 红色 | 错误/失败 |
| ℹ️ 蓝色 | 信息 |

## 🔍 调试技巧

### 1. 查看浏览器控制台
```
F12 → Console 标签
```

### 2. 查看测试日志
在测试页面底部的"测试日志"区域

### 3. 检查本地存储
```javascript
// 浏览器控制台执行
localStorage.getItem('user')
localStorage.getItem('payment_test_mode')
```

### 4. 清除测试数据
```javascript
// 浏览器控制台执行
localStorage.clear()
location.reload()
```

## 🚨 常见问题速查

| 问题 | 解决方案 |
|------|----------|
| Failed to fetch | 后端未启动，自动切换测试模式 |
| Stripe 未加载 | 检查网络连接，刷新页面 |
| 支付失败 | 检查测试卡号是否正确 |
| 权限不足 | 检查当前计划状态 |

## 📞 快速链接

- [Stripe 测试卡号](https://stripe.com/docs/testing)
- [Stripe Dashboard](https://dashboard.stripe.com/test/dashboard)
- [项目文档](./PAYMENT_SYSTEM_GUIDE.md)

## 🎯 测试检查清单

- [ ] 打开测试页面
- [ ] 检查系统状态（绿色 = 正常）
- [ ] 测试订阅流程
- [ ] 测试按次付费
- [ ] 测试权限检查
- [ ] 测试状态切换
- [ ] 查看测试日志
- [ ] 清除测试数据

## 💡 专业提示

1. **测试模式优先**：开发时始终使用测试模式
2. **日志很重要**：遇到问题先查看日志
3. **状态检查**：定期运行状态检查页面
4. **数据清理**：测试后记得清除数据
5. **文档参考**：详细信息查看完整指南

---

**快速帮助**: 遇到问题？运行 `payment-status-checker.html` 进行诊断
