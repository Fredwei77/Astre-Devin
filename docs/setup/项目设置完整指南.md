# ğŸ¯ é¡¹ç›®è®¾ç½®å®Œæ•´æŒ‡å—

## ğŸ“‹ é¡¹ç›®è¯†åˆ«

ä½ æœ‰ä¸¤ä¸ª Supabase é¡¹ç›®ï¼š

### é¡¹ç›® 1: languagelearningapp1
- **åŒºåŸŸ**: AWS | ap-southeast-1
- **ç”¨é€”**: è¯­è¨€å­¦ä¹ åº”ç”¨

### é¡¹ç›® 2: supabase-teal-queen âœ… (å½“å‰ä½¿ç”¨)
- **åŒºåŸŸ**: AWS | us-east-1
- **ç”¨é€”**: Destiny AIï¼ˆå åœ/é£æ°´/æ˜“ç»åº”ç”¨ï¼‰

## ğŸ¯ æ¨èä½¿ç”¨é¡¹ç›®

**å»ºè®®ä½¿ç”¨**: `supabase-teal-queen`

**åŸå› **:
1. è¿™æ˜¯ä½ å½“å‰æ­£åœ¨ä½¿ç”¨çš„é¡¹ç›®
2. æ‰€æœ‰çš„ä»£ç å’Œé…ç½®éƒ½æŒ‡å‘è¿™ä¸ªé¡¹ç›®
3. å·²ç»åœ¨ SQL Editor ä¸­æ‰“å¼€

## ğŸš€ å®Œæ•´è®¾ç½®æ­¥éª¤

### æ­¥éª¤ 1: ç¡®è®¤é¡¹ç›®è¿æ¥

1. æ‰“å¼€ `config.js` æ–‡ä»¶
2. ç¡®è®¤ Supabase URL å’Œ Key æ˜¯å¦æ­£ç¡®
3. åº”è¯¥æŒ‡å‘ `supabase-teal-queen` é¡¹ç›®

### æ­¥éª¤ 2: æ‰§è¡Œæ•°æ®åº“è®¾ç½®

#### æ–¹æ¡ˆ A: ä½¿ç”¨å®Œæ•´è®¾ç½®è„šæœ¬ï¼ˆæ¨èï¼‰

1. åœ¨ Supabase Dashboard ä¸­
2. é€‰æ‹© `supabase-teal-queen` é¡¹ç›®
3. è¿›å…¥ SQL Editor
4. å¤åˆ¶ `supabase-complete-setup.sql` çš„å†…å®¹
5. ç²˜è´´å¹¶ç‚¹å‡» "Run"

#### æ–¹æ¡ˆ B: åˆ†æ­¥æ‰§è¡Œ

**ç¬¬ä¸€æ­¥ï¼šå•†åº—ç³»ç»Ÿ**
```sql
-- æ‰§è¡Œ supabase-shop-schema.sql
-- åˆ›å»ºå•†å“ã€è®¢å•ã€è´­ç‰©è½¦è¡¨
```

**ç¬¬äºŒæ­¥ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**
```sql
-- æ‰§è¡Œ supabase-complete-setup.sql
-- åˆ›å»ºç”¨æˆ·ç®¡ç†ã€ä»˜è´¹è®°å½•ã€å åœè®°å½•è¡¨
```

### æ­¥éª¤ 3: éªŒè¯è¡¨åˆ›å»º

åœ¨ SQL Editor ä¸­è¿è¡Œï¼š

```sql
-- æ£€æŸ¥æ‰€æœ‰è¡¨
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN (
    'profiles',
    'products',
    'cart_items',
    'orders',
    'order_items',
    'shipping_addresses',
    'payments',
    'readings',
    'user_activity_logs'
);
```

åº”è¯¥çœ‹åˆ° 9 ä¸ªè¡¨ã€‚

### æ­¥éª¤ 4: æ£€æŸ¥ RLS ç­–ç•¥

```sql
-- æ£€æŸ¥ RLS ç­–ç•¥
SELECT schemaname, tablename, policyname 
FROM pg_policies 
WHERE schemaname = 'public';
```

### æ­¥éª¤ 5: æµ‹è¯•è¿æ¥

1. æ‰“å¼€æµè§ˆå™¨
2. è®¿é—® `http://localhost:8000/index.html`
3. å°è¯•ç™»å½•
4. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

## ğŸ”§ ä¿®å¤å½“å‰é”™è¯¯

ä½ é‡åˆ°çš„é”™è¯¯ï¼š
```
ERROR: 42883: function update_updated_at_column() does not exist
```

**è§£å†³æ–¹æ³•**:

ä½¿ç”¨ `supabase-complete-setup.sql` æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ã€‚

## ğŸ“¦ å®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„

### ç”¨æˆ·ç›¸å…³
- âœ… `profiles` - ç”¨æˆ·ä¿¡æ¯ï¼ˆæ‰©å±•ï¼‰
- âœ… `payments` - ä»˜è´¹è®°å½•
- âœ… `readings` - å åœè®°å½•
- âœ… `user_activity_logs` - æ´»åŠ¨æ—¥å¿—

### å•†åº—ç›¸å…³
- âœ… `products` - å•†å“
- âœ… `cart_items` - è´­ç‰©è½¦
- âœ… `orders` - è®¢å•
- âœ… `order_items` - è®¢å•æ˜ç»†
- âœ… `shipping_addresses` - æ”¶è´§åœ°å€

## ğŸ¨ å‰ç«¯é¡µé¢

### ç”¨æˆ·ç«¯
- `index.html` - é¦–é¡µ
- `login.html` - ç™»å½•é¡µé¢
- `profile.html` - ä¸ªäººèµ„æ–™
- `divination.html` - å åœ
- `iching.html` - æ˜“ç»
- `fengshui.html` - é£æ°´

### ç®¡ç†ç«¯
- `admin-users.html` - ç”¨æˆ·ç®¡ç†
- `admin-shop.html` - å•†å“ç®¡ç†

## ğŸ” é…ç½®æ–‡ä»¶

### config.js
```javascript
const SUPABASE_URL = 'your-project-url';
const SUPABASE_ANON_KEY = 'your-anon-key';
```

### è·å–é…ç½®ä¿¡æ¯

1. è¿›å…¥ Supabase Dashboard
2. é€‰æ‹© `supabase-teal-queen` é¡¹ç›®
3. ç‚¹å‡» Settings â†’ API
4. å¤åˆ¶ï¼š
   - Project URL
   - anon public key

## ğŸ“ æ‰§è¡Œæ¸…å•

### æ•°æ®åº“è®¾ç½®
- [ ] ç¡®è®¤ä½¿ç”¨ `supabase-teal-queen` é¡¹ç›®
- [ ] æ‰§è¡Œ `supabase-complete-setup.sql`
- [ ] éªŒè¯è¡¨åˆ›å»ºæˆåŠŸ
- [ ] æ£€æŸ¥ RLS ç­–ç•¥
- [ ] æµ‹è¯•æ•°æ®åº“è¿æ¥

### å‰ç«¯é…ç½®
- [ ] æ›´æ–° `config.js` ä¸­çš„ URL å’Œ Key
- [ ] æµ‹è¯•ç™»å½•åŠŸèƒ½
- [ ] æµ‹è¯•ç”¨æˆ·ç®¡ç†åå°
- [ ] æµ‹è¯•å•†å“ç®¡ç†åå°

### åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- [ ] å åœåŠŸèƒ½
- [ ] å•†å“æµè§ˆ
- [ ] è´­ç‰©è½¦åŠŸèƒ½
- [ ] ç”¨æˆ·ç®¡ç†åå°
- [ ] å•†å“ç®¡ç†åå°

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å‡½æ•°ä¸å­˜åœ¨é”™è¯¯
**A**: ä½¿ç”¨ `supabase-complete-setup.sql`ï¼Œå®ƒåŒ…å«æ‰€æœ‰å¿…è¦çš„å‡½æ•°å®šä¹‰ã€‚

### Q2: è¡¨å·²å­˜åœ¨é”™è¯¯
**A**: SQL ä½¿ç”¨äº† `IF NOT EXISTS`ï¼Œå¯ä»¥å®‰å…¨åœ°é‡å¤æ‰§è¡Œã€‚

### Q3: RLS ç­–ç•¥å†²çª
**A**: SQL ä½¿ç”¨äº† `DROP POLICY IF EXISTS`ï¼Œä¼šå…ˆåˆ é™¤æ—§ç­–ç•¥ã€‚

### Q4: è¿æ¥å¤±è´¥
**A**: æ£€æŸ¥ `config.js` ä¸­çš„ URL å’Œ Key æ˜¯å¦æ­£ç¡®ã€‚

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### æ£€æŸ¥é¡¹ç›®é…ç½®
```bash
# æŸ¥çœ‹ config.js
cat config.js
```

### æ£€æŸ¥æ•°æ®åº“è¿æ¥
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
console.log(window.supabaseClient);
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. æŸ¥çœ‹ Console æ ‡ç­¾
3. æŸ¥çœ‹ Network æ ‡ç­¾

## ğŸ‰ å®Œæˆå

### è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost:8000/index.html
- ç”¨æˆ·ç®¡ç†: http://localhost:8000/admin-users.html
- å•†å“ç®¡ç†: http://localhost:8000/admin-shop.html

### æµ‹è¯•è´¦å·
åˆ›å»ºæµ‹è¯•è´¦å·åï¼Œå¯ä»¥ï¼š
1. æµ‹è¯•å åœåŠŸèƒ½
2. æµ‹è¯•è´­ç‰©åŠŸèƒ½
3. åœ¨åå°æŸ¥çœ‹ç”¨æˆ·æ•°æ®

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `ç”¨æˆ·ç®¡ç†ç³»ç»Ÿå®æ–½æŠ¥å‘Š.md` - ç”¨æˆ·ç®¡ç†è¯¦ç»†æ–‡æ¡£
- `é£æ°´å•†åº—å®Œæ•´å®æ–½æŠ¥å‘Š.md` - å•†åº—ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£
- `SUPABASE_SETUP.md` - Supabase åŸºç¡€è®¾ç½®

## ğŸš€ ä¸‹ä¸€æ­¥

1. âœ… æ‰§è¡Œ `supabase-complete-setup.sql`
2. âœ… éªŒè¯è¡¨åˆ›å»º
3. âœ… æ›´æ–° `config.js`
4. âœ… æµ‹è¯•åº”ç”¨
5. âœ… å¼€å§‹ä½¿ç”¨ï¼

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è®¾ç½®ï¼** ğŸŠ
